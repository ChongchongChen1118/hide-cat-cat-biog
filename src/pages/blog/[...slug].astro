---
import { getCollection } from "astro:content";
import PostLayout from "../../layouts/PostLayout.astro";

export async function getStaticPaths() {
  const posts = await getCollection("posts", (p) => !p.data.draft);
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---
<PostLayout frontmatter={post.data}>
  <Content />

<hr />
<div class="small" style="color:var(--muted);margin-bottom:8px;">
  评论（Giscus）
</div>

<div class="giscus-wrap">
<script src="https://giscus.app/client.js"
        data-repo="ChongchongChen1118/hide-cat-cat-biog"
        data-repo-id="R_kgDOQ6otfg"
        data-category="General"
        data-category-id="DIC_kwDOQ6otfs4C1AUc"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="transparent_dark"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
</div>
